import { BehaviorSubject } from 'rxjs';
export class PanZoomConfig {
    constructor(options) {
        this.zoomLevels = 5;
        this.neutralZoomLevel = 2;
        this.scalePerZoomLevel = 2.0;
        this.initialZoomLevel = this.neutralZoomLevel;
        this.friction = 10.0;
        this.haltSpeed = 100.0;
        this.initialPanX = 0;
        this.initialPanY = 0;
        this.keepInBounds = false;
        this.keepInBoundsDragPullback = 0.7;
        this.keepInBoundsRestoreForce = 0.5;
        this.panOnClickDrag = true;
        this.dragMouseButton = 'left'; // left, middle, right
        this.zoomButtonIncrement = 1.0;
        this.zoomOnDoubleClick = true;
        this.zoomOnMouseWheel = true;
        this.invertMouseWheel = false;
        this.zoomStepDuration = 0.2;
        this.zoomToFitZoomLevelFactor = 0.95;
        this.freeMouseWheel = true;
        this.freeMouseWheelFactor = 0.08;
        this.modelChanged = new BehaviorSubject({
            isPanning: null,
            zoomLevel: null,
            pan: {
                x: null,
                y: null
            }
        });
        this.api = new BehaviorSubject({
            model: null,
            config: null,
            changeZoomLevel: null,
            zoomIn: null,
            zoomOut: null,
            zoomToFit: null,
            getViewPosition: null,
            getModelPosition: null,
            resetView: null,
            panToPoint: null,
            panDelta: null,
            panDeltaPercent: null,
            panDeltaAbsolute: null,
            centerContent: null,
            centerX: null,
            centerY: null,
            centerTopLeft: null,
            centerTopRight: null,
            centerBottomLeft: null,
            centerBottomRight: null,
            updateContentDimensions: null,
            detectContentDimensions: null
        });
        this.acceleratePan = true;
        this.dynamicContentDimensions = false;
        if (options === undefined) {
            return;
        }
        if ('zoomLevels' in options) {
            this.zoomLevels = options.zoomLevels;
        }
        if ('neutralZoomLevel' in options) {
            this.neutralZoomLevel = options.neutralZoomLevel;
        }
        if ('scalePerZoomLevel' in options) {
            this.scalePerZoomLevel = options.scalePerZoomLevel;
        }
        if ('initialZoomLevel' in options) {
            this.initialZoomLevel = options.initialZoomLevel;
        }
        if ('friction' in options) {
            this.friction = options.friction;
        }
        if ('haltSpeed' in options) {
            this.haltSpeed = options.haltSpeed;
        }
        if ('initialPanX' in options) {
            this.initialPanX = options.initialPanX;
        }
        if ('initialPanY' in options) {
            this.initialPanY = options.initialPanY;
        }
        if ('initialZoomToFit' in options) {
            this.initialZoomToFit = options.initialZoomToFit;
        }
        if ('keepInBounds' in options) {
            this.keepInBounds = options.keepInBounds;
        }
        if ('keepInBoundsDragPullback' in options) {
            this.keepInBoundsDragPullback = options.keepInBoundsDragPullback;
        }
        if ('keepInBoundsRestoreForce' in options) {
            this.keepInBoundsRestoreForce = options.keepInBoundsRestoreForce;
        }
        if ('panOnClickDrag' in options) {
            this.panOnClickDrag = options.panOnClickDrag;
        }
        if ('dragMouseButton' in options) {
            this.dragMouseButton = options.dragMouseButton;
        }
        if ('zoomButtonIncrement' in options) {
            this.zoomButtonIncrement = options.zoomButtonIncrement;
        }
        if ('zoomOnDoubleClick' in options) {
            this.zoomOnDoubleClick = options.zoomOnDoubleClick;
        }
        if ('zoomOnMouseWheel' in options) {
            this.zoomOnMouseWheel = options.zoomOnMouseWheel;
        }
        if ('invertMouseWheel' in options) {
            this.invertMouseWheel = options.invertMouseWheel;
        }
        if ('zoomStepDuration' in options) {
            this.zoomStepDuration = options.zoomStepDuration;
        }
        if ('zoomToFitZoomLevelFactor' in options) {
            this.zoomToFitZoomLevelFactor = options.zoomToFitZoomLevelFactor;
        }
        if ('freeMouseWheel' in options) {
            this.freeMouseWheel = options.freeMouseWheel;
        }
        if ('freeMouseWheelFactor' in options) {
            this.freeMouseWheelFactor = options.freeMouseWheelFactor;
        }
        if (this.keepInBounds && this.neutralZoomLevel !== 0) {
            console.warn('You have set keepInBounds to true and neutralZoomLevel to ' + this.neutralZoomLevel + '. Be aware that the zoom level cannot go below ' + this.neutralZoomLevel);
        }
        if ('noDragFromElementClass' in options) {
            this.noDragFromElementClass = options.noDragFromElementClass;
        }
        if ('acceleratePan' in options) {
            this.acceleratePan = options.acceleratePan;
        }
        if ('dynamicContentDimensions' in options) {
            this.dynamicContentDimensions = options.dynamicContentDimensions;
        }
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFuem9vbS1jb25maWcuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9wcm9qZWN0cy9uZ3gtcGFuem9vbS9zcmMvbGliL3Bhbnpvb20tY29uZmlnLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFNdkMsTUFBTSxPQUFPLGFBQWE7SUE0RHhCLFlBQVksT0FBOEI7UUEzRDFDLGVBQVUsR0FBRyxDQUFDLENBQUM7UUFDZixxQkFBZ0IsR0FBRyxDQUFDLENBQUM7UUFDckIsc0JBQWlCLEdBQUcsR0FBRyxDQUFDO1FBQ3hCLHFCQUFnQixHQUFHLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQztRQUN6QyxhQUFRLEdBQUcsSUFBSSxDQUFDO1FBQ2hCLGNBQVMsR0FBRyxLQUFLLENBQUM7UUFDbEIsZ0JBQVcsR0FBRyxDQUFDLENBQUM7UUFDaEIsZ0JBQVcsR0FBRyxDQUFDLENBQUM7UUFFaEIsaUJBQVksR0FBRyxLQUFLLENBQUM7UUFDckIsNkJBQXdCLEdBQUcsR0FBRyxDQUFDO1FBQy9CLDZCQUF3QixHQUFHLEdBQUcsQ0FBQztRQUMvQixtQkFBYyxHQUFHLElBQUksQ0FBQztRQUN0QixvQkFBZSxHQUFHLE1BQU0sQ0FBQyxDQUFDLHNCQUFzQjtRQUNoRCx3QkFBbUIsR0FBRyxHQUFHLENBQUM7UUFDMUIsc0JBQWlCLEdBQUcsSUFBSSxDQUFDO1FBQ3pCLHFCQUFnQixHQUFHLElBQUksQ0FBQztRQUN4QixxQkFBZ0IsR0FBRyxLQUFLLENBQUM7UUFDekIscUJBQWdCLEdBQUcsR0FBRyxDQUFDO1FBQ3ZCLDZCQUF3QixHQUFHLElBQUksQ0FBQztRQUNoQyxtQkFBYyxHQUFHLElBQUksQ0FBQztRQUN0Qix5QkFBb0IsR0FBRyxJQUFJLENBQUM7UUFFNUIsaUJBQVksR0FBa0MsSUFBSSxlQUFlLENBQWU7WUFDOUUsU0FBUyxFQUFFLElBQUk7WUFDZixTQUFTLEVBQUUs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R0FBRyxpREFBaUQsR0FBRyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztTQUNoTDtRQUNELElBQUksd0JBQXdCLElBQUksT0FBTyxFQUFFO1lBQ3ZDLElBQUksQ0FBQyxzQkFBc0IsR0FBRyxPQUFPLENBQUMsc0JBQXNCLENBQUM7U0FDOUQ7UUFDRCxJQUFJLGVBQWUsSUFBSSxPQUFPLEVBQUU7WUFDOUIsSUFBSSxDQUFDLGFBQWEsR0FBRyxPQUFPLENBQUMsYUFBYSxDQUFDO1NBQzVDO1FBQ0QsSUFBSSwwQkFBMEIsSUFBSSxPQUFPLEVBQUU7WUFDekMsSUFBSSxDQUFDLHdCQUF3QixHQUFHLE9BQU8sQ0FBQyx3QkFBd0IsQ0FBQztTQUNsRTtJQUNILENBQUM7Q0FDRiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJlaGF2aW9yU3ViamVjdCB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgUmVjdCB9IGZyb20gJy4vdHlwZXMvcmVjdCc7XG5pbXBvcnQgeyBQYW5ab29tTW9kZWwgfSBmcm9tICcuL3Bhbnpvb20tbW9kZWwnO1xuaW1wb3J0IHsgUGFuWm9vbUFQSSB9IGZyb20gJy4vcGFuem9vbS1hcGknO1xuaW1wb3J0IHsgUGFuWm9vbUNvbmZpZ09wdGlvbnMgfSBmcm9tICcuL3R5cGVzL3Bhbnpvb20tY29uZmlnLW9wdGlvbnMnO1xuXG5leHBvcnQgY2xhc3MgUGFuWm9vbUNvbmZpZyB7XG4gIHpvb21MZXZlbHMgPSA1O1xuICBuZXV0cmFsWm9vbUxldmVsID0gMjtcbiAgc2NhbGVQZXJab29tTGV2ZWwgPSAyLjA7XG4gIGluaXRpYWxab29tTGV2ZWwgPSB0aGlzLm5ldXRyYWxab29tTGV2ZWw7XG4gIGZyaWN0aW9uID0gMTAuMDtcbiAgaGFsdFNwZWVkID0gMTAwLjA7XG4gIGluaXRpYWxQYW5YID0gMDtcbiAgaW5pdGlhbFBhblkgPSAwO1xuICBpbml0aWFsWm9vbVRvRml0OiBSZWN0O1xuICBrZWVwSW5Cb3VuZHMgPSBmYWxzZTtcbiAga2VlcEluQm91bmRzRHJhZ1B1bGxiYWNrID0gMC43O1xuICBrZWVwSW5Cb3VuZHNSZXN0b3JlRm9yY2UgPSAwLjU7XG4gIHBhbk9uQ2xpY2tEcmFnID0gdHJ1ZTtcbiAgZHJhZ01vdXNlQnV0dG9uID0gJ2xlZnQnOyAvLyBsZWZ0LCBtaWRkbGUsIHJpZ2h0XG4gIHpvb21CdXR0b25JbmNyZW1lbnQgPSAxLjA7XG4gIHpvb21PbkRvdWJsZUNsaWNrID0gdHJ1ZTtcbiAgem9vbU9uTW91c2VXaGVlbCA9IHRydWU7XG4gIGludmVydE1vdXNlV2hlZWwgPSBmYWxzZTtcbiAgem9vbVN0ZXBEdXJhdGlvbiA9IDAuMjtcbiAgem9vbVRvRml0Wm9vbUxldmVsRmFjdG9yID0gMC45NTtcbiAgZnJlZU1vdXNlV2hlZWwgPSB0cnVlO1xuICBmcmVlTW91c2VXaGVlbEZhY3RvciA9IDAuMDg7XG4gIG5vRHJhZ0Zyb21FbGVtZW50Q2xhc3M6IHN0cmluZztcbiAgbW9kZWxDaGFuZ2VkOiBCZWhhdmlvclN1YmplY3Q8UGFuWm9vbU1vZGVsPiA9IG5ldyBCZWhhdmlvclN1YmplY3Q8UGFuWm9vbU1vZGVsPih7XG4gICAgaXNQYW5uaW5nOiBudWxsLFxuICAgIHpvb21MZXZlbDogbnVsbCxcbiAgICBwYW46IHtcbiAgICAgIHg6IG51bGwsXG4gICAgICB5OiBudWxsXG4gICAgfVxuICB9KTtcbiAgYXBpOiBCZWhhdmlvclN1YmplY3Q8UGFuWm9vbUFQST4gPSBuZXcgQmVoYXZpb3JTdWJqZWN0PFBhblpvb21BUEk+KHtcbiAgICBtb2RlbDogbnVsbCxcbiAgICBjb25maWc6IG51bGwsXG4gICAgY2hhbmdlWm9vbUxldmVsOiBudWxsLFxuICAgIHpvb21JbjogbnVsbCxcbiAgICB6b29tT3V0OiBudWxsLFxuICAgIHpvb21Ub0ZpdDogbnVsbCxcbiAgICBnZXRWaWV3UG9zaXRpb246IG51bGwsXG4gICAgZ2V0TW9kZWxQb3NpdGlvbjogbnVsbCxcbiAgICByZXNldFZpZXc6IG51bGwsXG4gICAgcGFuVG9Qb2ludDogbnVsbCxcbiAgICBwYW5EZWx0YTogbnVsbCxcbiAgICBwYW5EZWx0YVBlcmNlbnQ6IG51bGwsXG4gICAgcGFuRGVsdGFBYnNvbHV0ZTogbnVsbCxcbiAgICBjZW50ZXJDb250ZW50OiBudWxsLFxuICAgIGNlbnRlclg6IG51bGwsXG4gICAgY2VudGVyWTogbnVsbCxcbiAgICBjZW50ZXJUb3BMZWZ0OiBudWxsLFxuICAgIGNlbnRlclRvcFJpZ2h0OiBudWxsLFxuICAgIGNlbnRlckJvdHRvbUxlZnQ6IG51bGwsXG4gICAgY2VudGVyQm90dG9tUmlnaHQ6IG51bGwsXG4gICAgdXBkYXRlQ29udGVudERpbWVuc2lvbnM6IG51bGwsXG4gICAgZGV0ZWN0Q29udGVudERpbWVuc2lvbnM6IG51bGxcbiAgfSk7XG4gIGFjY2VsZXJhdGVQYW4gPSB0cnVlO1xuICBkeW5hbWljQ29udGVudERpbWVuc2lvbnMgPSBmYWxzZTtcblxuXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnM/OiBQYW5ab29tQ29uZmlnT3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCd6b29tTGV2ZWxzJyBpbiBvcHRpb25zKSB7XG4gICAgICB0aGlzLnpvb21MZXZlbHMgPSBvcHRpb25zLnpvb21MZXZlbHM7XG4gICAgfVxuICAgIGlmICgnbmV1dHJhbFpvb21MZXZlbCcgaW4gb3B0aW9ucykge1xuICAgICAgdGhpcy5uZXV0cmFsWm9vbUxldmVsID0gb3B0aW9ucy5uZXV0cmFsWm9vbUxldmVsO1xuICAgIH1cbiAgICBpZiAoJ3NjYWxlUGVyWm9vbUxldmVsJyBpbiBvcHRpb25zKSB7XG4gICAgICB0aGlzLnNjYWxlUGVyWm9vbUxldmVsID0gb3B0aW9ucy5zY2FsZVBlclpvb21MZXZlbDtcbiAgICB9XG4gICAgaWYgKCdpbml0aWFsWm9vbUxldmVsJyBpbiBvcHRpb25zKSB7XG4gICAgICB0aGlzLmluaXRpYWxab29tTGV2ZWwgPSBvcHRpb25zLmluaXRpYWxab29tTGV2ZWw7XG4gICAgfVxuICAgIGlmICgnZnJpY3Rpb24nIGluIG9wdGlvbnMpIHtcbiAgICAgIHRoaXMuZnJpY3Rpb24gPSBvcHRpb25zLmZyaWN0aW9uO1xuICAgIH1cbiAgICBpZiAoJ2hhbHRTcGVlZCcgaW4gb3B0aW9ucykge1xuICAgICAgdGhpcy5oYWx0U3BlZWQgPSBvcHRpb25zLmhhbHRTcGVlZDtcbiAgICB9XG4gICAgaWYgKCdpbml0aWFsUGFuWCcgaW4gb3B0aW9ucykge1xuICAgICAgdGhpcy5pbml0aWFsUGFuWCA9IG9wdGlvbnMuaW5pdGlhbFBhblg7XG4gICAgfVxuICAgIGlmICgnaW5pdGlhbFBhblknIGluIG9wdGlvbnMpIHtcbiAgICAgIHRoaXMuaW5pdGlhbFBhblkgPSBvcHRpb25zLmluaXRpYWxQYW5ZO1xuICAgIH1cbiAgICBpZiAoJ2luaXRpYWxab29tVG9GaXQnIGluIG9wdGlvbnMpIHtcbiAgICAgIHRoaXMuaW5pdGlhbFpvb21Ub0ZpdCA9IG9wdGlvbnMuaW5pdGlhbFpvb21Ub0ZpdDtcbiAgICB9XG4gICAgaWYgKCdrZWVwSW5Cb3VuZHMnIGluIG9wdGlvbnMpIHtcbiAgICAgIHRoaXMua2VlcEluQm91bmRzID0gb3B0aW9ucy5rZWVwSW5Cb3VuZHM7XG4gICAgfVxuICAgIGlmICgna2VlcEluQm91bmRzRHJhZ1B1bGxiYWNrJyBpbiBvcHRpb25zKSB7XG4gICAgICB0aGlzLmtlZXBJbkJvdW5kc0RyYWdQdWxsYmFjayA9IG9wdGlvbnMua2VlcEluQm91bmRzRHJhZ1B1bGxiYWNrO1xuICAgIH1cbiAgICBpZiAoJ2tlZXBJbkJvdW5kc1Jlc3RvcmVGb3JjZScgaW4gb3B0aW9ucykge1xuICAgICAgdGhpcy5rZWVwSW5Cb3VuZHNSZXN0b3JlRm9yY2UgPSBvcHRpb25zLmtlZXBJbkJvdW5kc1Jlc3RvcmVGb3JjZTtcbiAgICB9XG4gICAgaWYgKCdwYW5PbkNsaWNrRHJhZycgaW4gb3B0aW9ucykge1xuICAgICAgdGhpcy5wYW5PbkNsaWNrRHJhZyA9IG9wdGlvbnMucGFuT25DbGlja0RyYWc7XG4gICAgfVxuICAgIGlmICgnZHJhZ01vdXNlQnV0dG9uJyBpbiBvcHRpb25zKSB7XG4gICAgICB0aGlzLmRyYWdNb3VzZUJ1dHRvbiA9IG9wdGlvbnMuZHJhZ01vdXNlQnV0dG9uO1xuICAgIH1cbiAgICBpZiAoJ3pvb21CdXR0b25JbmNyZW1lbnQnIGluIG9wdGlvbnMpIHtcbiAgICAgIHRoaXMuem9vbUJ1dHRvbkluY3JlbWVudCA9IG9wdGlvbnMuem9vbUJ1dHRvbkluY3JlbWVudDtcbiAgICB9XG4gICAgaWYgKCd6b29tT25Eb3VibGVDbGljaycgaW4gb3B0aW9ucykge1xuICAgICAgdGhpcy56b29tT25Eb3VibGVDbGljayA9IG9wdGlvbnMuem9vbU9uRG91YmxlQ2xpY2s7XG4gICAgfVxuICAgIGlmICgnem9vbU9uTW91c2VXaGVlbCcgaW4gb3B0aW9ucykge1xuICAgICAgdGhpcy56b29tT25Nb3VzZVdoZWVsID0gb3B0aW9ucy56b29tT25Nb3VzZVdoZWVsO1xuICAgIH1cbiAgICBpZiAoJ2ludmVydE1vdXNlV2hlZWwnIGluIG9wdGlvbnMpIHtcbiAgICAgIHRoaXMuaW52ZXJ0TW91c2VXaGVlbCA9IG9wdGlvbnMuaW52ZXJ0TW91c2VXaGVlbDtcbiAgICB9XG4gICAgaWYgKCd6b29tU3RlcER1cmF0aW9uJyBpbiBvcHRpb25zKSB7XG4gICAgICB0aGlzLnpvb21TdGVwRHVyYXRpb24gPSBvcHRpb25zLnpvb21TdGVwRHVyYXRpb247XG4gICAgfVxuICAgIGlmICgnem9vbVRvRml0Wm9vbUxldmVsRmFjdG9yJyBpbiBvcHRpb25zKSB7XG4gICAgICB0aGlzLnpvb21Ub0ZpdFpvb21MZXZlbEZhY3RvciA9IG9wdGlvbnMuem9vbVRvRml0Wm9vbUxldmVsRmFjdG9yO1xuICAgIH1cbiAgICBpZiAoJ2ZyZWVNb3VzZVdoZWVsJyBpbiBvcHRpb25zKSB7XG4gICAgICB0aGlzLmZyZWVNb3VzZVdoZWVsID0gb3B0aW9ucy5mcmVlTW91c2VXaGVlbDtcbiAgICB9XG4gICAgaWYgKCdmcmVlTW91c2VXaGVlbEZhY3RvcicgaW4gb3B0aW9ucykge1xuICAgICAgdGhpcy5mcmVlTW91c2VXaGVlbEZhY3RvciA9IG9wdGlvbnMuZnJlZU1vdXNlV2hlZWxGYWN0b3I7XG4gICAgfVxuICAgIGlmICh0aGlzLmtlZXBJbkJvdW5kcyAmJiB0aGlzLm5ldXRyYWxab29tTGV2ZWwgIT09IDApIHtcbiAgICAgIGNvbnNvbGUud2FybignWW91IGhhdmUgc2V0IGtlZXBJbkJvdW5kcyB0byB0cnVlIGFuZCBuZXV0cmFsWm9vbUxldmVsIHRvICcgKyB0aGlzLm5ldXRyYWxab29tTGV2ZWwgKyAnLiBCZSBhd2FyZSB0aGF0IHRoZSB6b29tIGxldmVsIGNhbm5vdCBnbyBiZWxvdyAnICsgdGhpcy5uZXV0cmFsWm9vbUxldmVsKTtcbiAgICB9XG4gICAgaWYgKCdub0RyYWdGcm9tRWxlbWVudENsYXNzJyBpbiBvcHRpb25zKSB7XG4gICAgICB0aGlzLm5vRHJhZ0Zyb21FbGVtZW50Q2xhc3MgPSBvcHRpb25zLm5vRHJhZ0Zyb21FbGVtZW50Q2xhc3M7XG4gICAgfVxuICAgIGlmICgnYWNjZWxlcmF0ZVBhbicgaW4gb3B0aW9ucykge1xuICAgICAgdGhpcy5hY2NlbGVyYXRlUGFuID0gb3B0aW9ucy5hY2NlbGVyYXRlUGFuO1xuICAgIH1cbiAgICBpZiAoJ2R5bmFtaWNDb250ZW50RGltZW5zaW9ucycgaW4gb3B0aW9ucykge1xuICAgICAgdGhpcy5keW5hbWljQ29udGVudERpbWVuc2lvbnMgPSBvcHRpb25zLmR5bmFtaWNDb250ZW50RGltZW5zaW9ucztcbiAgICB9XG4gIH1cbn1cbiJdfQ==