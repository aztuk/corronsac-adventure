import { Component, Input, Output, EventEmitter, ViewChild, ContentChild, NgZone, ElementRef, ChangeDetectorRef, ChangeDetectionStrategy } from '@angular/core';
import { Directionality } from '@angular/cdk/bidi';
import { coerceBooleanProperty } from '@angular/cdk/coercion';
import { fromEvent, Subject } from 'rxjs';
import { auditTime, filter, map, pairwise, pluck, takeUntil, tap } from 'rxjs/operators';
import { ScrollViewport } from './scroll-viewport';
import { SmoothScrollManager } from 'ngx-scrollbar/smooth-scroll';
import { ScrollbarManager } from './utils/scrollbar-manager';
export class NgScrollbar {
    constructor(el, zone, changeDetectorRef, dir, smoothScroll, manager) {
        this.el = el;
        this.zone = zone;
        this.changeDetectorRef = changeDetectorRef;
        this.dir = dir;
        this.smoothScroll = smoothScroll;
        this.manager = manager;
        this._disabled = false;
        this._sensorDisabled = this.manager.globalOptions.sensorDisabled;
        this._pointerEventsDisabled = this.manager.globalOptions.pointerEventsDisabled;
        this._autoHeightDisabled = this.manager.globalOptions.autoHeightDisabled;
        this._autoWidthDisabled = this.manager.globalOptions.autoWidthDisabled;
        this._viewportPropagateMouseMove = this.manager.globalOptions.viewportPropagateMouseMove;
        /** A class forwarded to scrollable viewport element */
        this.viewClass = this.manager.globalOptions.viewClass;
        /** A class forwarded to the scrollbar track element */
        this.trackClass = this.manager.globalOptions.trackClass;
        /** A class forwarded to the scrollbar thumb element */
        this.thumbClass = this.manager.globalOptions.thumbClass;
        /** Minimum scrollbar thumb size */
        this.minThumbSize = this.manager.globalOptions.minThumbSize;
        /** The duration which the scrolling takes to reach its target when scrollbar rail is clicked */
        this.trackClickScrollDuration = this.manager.globalOptions.trackClickScrollDuration;
        /**
         * Sets the pointer events method
         * Use viewport pointer events  to handle dragging and track click (This makes scrolling work when mouse is over the scrollbar)
         * Use scrollbar pointer events to handle dragging and track click
         */
        this.pointerEventsMethod = this.manager.globalOptions.pointerEventsMethod;
        /**
         * Sets the supported scroll track of the viewport, there are 3 options:
         *
         * - `vertical` Use both vertical and horizontal scrollbar
         * - `horizontal` Use both vertical and horizontal scrollbar
         * - `all` Use both vertical and horizontal scrollbar
         */
        this.track = this.manager.globalOptions.track;
        /**
         * When to show the scrollbar, and there are 3 options:
         *
         * - `native` (default) Scrollbar will be visible when viewport is scrollable like with native scrollbar
         * - `hover` Scrollbars are hidden by default, only visible on scrolling or hovering
         * - `always` Scrollbars are always shown even if the viewport is not scrollable
         */
        this.visibility = this.manager.globalOptions.visibility;
        /**
         *  Sets the appearance of the scrollbar, there are 2 options:
         *
         * - `standard` (default) scrollbar space will be reserved just like with native scrollbar.
         * - `compact` scrollbar doesn't reserve any space, they are placed over the viewport.
         */
        this.appearance = this.manager.globalOptions.appearance;
        /**
         * Sets the position of each scrollbar, there are 4 options:
         *
         * - `native` (Default) Use the default position like in native scrollbar.
         * - `invertY` Inverts vertical scrollbar position
         * - `invertX` Inverts Horizontal scrollbar position
         * - `invertAll` Inverts both scrollbar positions
         */
        this.position = this.manager.globalOptions.position;
        /** Debounce interval for detecting changes via ResizeObserver */
        this.sensorDebounce = this.manager.globalOptions.sensorDebounce;
        /** Scroll Audit Time */
        this.scrollAuditTime = this.manager.globalOptions.scrollAuditTime;
        /** Steam that emits when scrollbar is updated */
        this.updated = new EventEmitter();
        /** Set of attributes added on the scrollbar wrapper */
        this.state = {};
        /** Stream that destroys components' observables */
        this.destroyed = new Subject();
    }
    /** Disable custom scrollbar and switch back to native scrollbar */
    get disabled() {
        return this._disabled;
    }
    set disabled(disabled) {
        this._disabled = coerceBooleanProperty(disabled);
    }
    /** Whether ResizeObserver is disabled */
    get sensorDisabled() {
        return this._sensorDisabled;
    }
    set sensorDisabled(disabled) {
        this._sensorDisabled = coerceBooleanProperty(disabled);
    }
    /** A flag used to enable/disable the scrollbar thumb dragged event */
    get pointerEventsDisabled() {
        return this._pointerEventsDisabled;
    }
    set pointerEventsDisabled(disabled) {
        this._pointerEventsDisabled = coerceBooleanProperty(disabled);
    }
    /** Enable viewport mousemove event propagation (only when pointerEventsMethod="viewport") */
    get viewportPropagateMouseMove() {
        return this._viewportPropagateMouseMove;
    }
    set viewportPropagateMouseMove(disabled) {
        this._viewportPropagateMouseMove = coerceBooleanProperty(disabled);
    }
    /** Disable auto-height */
    get autoHeightDisabled() {
        return this._autoHeightDisabled;
    }
    set autoHeightDisabled(disabled) {
        this._autoHeightDisabled = coerceBooleanProperty(disabled);
    }
    /** Disable auto-width */
    get autoWidthDisabled() {
        return this._autoWidthDisabled;
    }
    set autoWidthDisabled(disabled) {
        this._autoWidthDisabled = coerceBooleanProperty(disabled);
    }
    get nativeElement() {
        return this.el.nativeElement;
    }
    /**
     * Update local state with each change detection
     */
    updateState() {
        let verticalUsed = false;
        let horizontalUsed = false;
        let isVerticallyScrollable = false;
        let isHorizontallyScrollable = false;
        // Check if vertical scrollbar should be displayed
        if (this.track === 'all' || this.track === 'vertical') {
            isVerticallyScrollable = this.viewport.scrollHeight > this.viewport.clientHeight;
            verticalUsed = this.visibility === 'always' || isVerticallyScrollable;
        }
        // Check if horizontal scrollbar should be displayed
        if (this.track === 'all' || this.track === 'horizontal') {
            isHorizontallyScrollable = this.viewport.scrollWidth > this.viewport.clientWidth;
            horizontalUsed = this.visibility === 'always' || isHorizontallyScrollable;
        }
        // Update inner wrapper attributes
        this.setState({
            position: this.position,
            track: this.track,
            appearance: this.appearance,
            visibility: this.visibility,
            deactivated: this.disabled,
            dir: this.dir.value,
            pointerEventsMethod: this.pointerEventsMethod,
            verticalUsed,
            horizontalUsed,
            isVerticallyScrollable,
            isHorizontallyScrollable
        });
    }
    setState(state) {
        this.state = Object.assign(Object.assign({}, this.state), state);
        this.changeDetectorRef.detectChanges();
    }
    getScrolledByDirection(property) {
        let event;
        return this.scrolled.pipe(tap((e) => event = e), pluck('target', property), pairwise(), filter(([prev, curr]) => prev !== curr), map(() => event));
    }
    /**
     * Set hovered state if a scrollbar is being hovered
     */
    setHovered(hovered) {
        this.zone.run(() => this.setState(Object.assign({}, hovered)));
    }
    /**
     * Set dragging state if a scrollbar is being dragged
     */
    setDragging(dragging) {
        this.zone.run(() => this.setState(Object.assign({}, dragging)));
    }
    /**
     * Set clicked state if a scrollbar track is being click
     */
    setClicked(scrollbarClicked) {
        this.zone.run(() => this.setState({ scrollbarClicked }));
    }
    ngOnInit() {
        // Set the viewport based on user choice
        this.zone.runOutsideAngular(() => {
            if (this.customViewPort) {
                this.viewport = this.customViewPort;
                this.defaultViewPort.setAsWrapper();
            }
            else {
                this.viewport = this.defaultViewPort;
            }
            // Activate the selected viewport
            this.viewport.setAsViewport(this.viewClass);
            let scrollStream = fromEvent(this.viewport.nativeElement, 'scroll', { passive: true });
            // Throttle scroll event if 'scrollAuditTime' is set
            scrollStream = this.scrollAuditTime ? scrollStream.pipe(auditTime(this.scrollAuditTime)) : scrollStream;
            // Initialize scroll streams
            this.scrolled = scrollStream.pipe(takeUntil(this.destroyed));
            this.verticalScrolled = this.getScrolledByDirection('scrollTop');
            this.horizontalScrolled = this.getScrolledByDirection('scrollLeft');
        });
    }
    ngAfterViewChecked() {
        this.update();
    }
    ngOnDestroy() {
        this.destroyed.next();
        this.destroyed.complete();
    }
    /**
     * Update local state and the internal scrollbar controls
     */
    update() {
        if (!this.autoHeightDisabled) {
            this.updateHeight();
        }
        if (!this.autoWidthDisabled) {
            this.updateWidth();
        }
        // Re-evaluate the state after setting height or width
        this.updateState();
        this.updated.next();
    }
    /**
     * Smooth scroll functions
     */
    scrollTo(options) {
        return this.smoothScroll.scrollTo(this.viewport.nativeElement, options);
    }
    /**
     * Scroll to element by reference or selector
     */
    scrollToElement(target, options) {
        return this.smoothScroll.scrollToElement(this.viewport.nativeElement, target, options);
    }
    updateHeight() {
        // Auto-height: Set component height to content height
        if (this.appearance === 'standard' && this.scrollbarX) {
            // if scrollbar-x is displayed in standard mode
            this.nativeElement.style.height = `${this.viewport.contentHeight + this.scrollbarX.nativeElement.clientHeight}px`;
        }
        else {
            this.nativeElement.style.height = `${this.viewport.contentHeight}px`;
        }
    }
    updateWidth() {
        // Auto-width: Set component minWidth to content width
        if (this.appearance === 'standard' && this.scrollbarY) {
            // if scrollbar-y is displayed in standard mode
            this.nativeElement.style.width = `${this.viewport.contentWidth + this.scrollbarY.nativeElement.clientWidth}px`;
        }
        else {
            this.nativeElement.style.width = `${this.viewport.contentWidth}px`;
        }
    }
}
NgScrollbar.decorators = [
    { type: Component, args: [{
                selector: 'ng-scrollbar',
                exportAs: 'ngScrollbar',
                template: "<div class=\"ng-scrollbar-wrapper\" [ngAttr]=\"state\">\n  <div class=\"ng-scroll-viewport-wrapper\"\n       (resizeSensor)=\"update()\"\n       [sensorDebounce]=\"sensorDebounce\"\n       [sensorDisabled]=\"sensorDisabled\">\n    <div scrollViewport\n         hideNativeScrollbar>\n      <div>\n        <ng-content></ng-content>\n      </div>\n    </div>\n  </div>\n  <ng-container *ngIf=\"!disabled\">\n    <scrollbar-x #scrollbarX\n                 *ngIf=\"state.horizontalUsed\"\n                 [attr.scrollable]=\"state.isHorizontallyScrollable\"\n                 [attr.fit]=\"state.verticalUsed\">\n    </scrollbar-x>\n    <scrollbar-y #scrollbarY\n                 *ngIf=\"state.verticalUsed\"\n                 [attr.scrollable]=\"state.isVerticallyScrollable\"\n                 [attr.fit]=\"state.horizontalUsed\">\n    </scrollbar-y>\n  </ng-container>\n</div>\n\n",
                changeDetection: ChangeDetectionStrategy.OnPush,
                host: { '[class.ng-scrollbar]': 'true' },
                styles: ["::ng-deep .ng-scrollbar-measure{scrollbar-width:none;-ms-overflow-style:none}::ng-deep .ng-scrollbar-measure::-webkit-scrollbar{display:none}:host{--scrollbar-border-radius:7px;--scrollbar-padding:4px;--scrollbar-track-color:transparent;--scrollbar-thumb-color:rgba(0,0,0,0.2);--scrollbar-thumb-hover-color:var(--scrollbar-thumb-color);--scrollbar-size:5px;--scrollbar-hover-size:var(--scrollbar-size);--scrollbar-thumb-transition:height ease-out 150ms,width ease-out 150ms;--scrollbar-track-transition:height ease-out 150ms,width ease-out 150ms;display:block;position:relative;height:100%;max-height:100%;max-width:100%;box-sizing:content-box!important}:host>.ng-scrollbar-wrapper{--scrollbar-total-size:calc(var(--scrollbar-size) + var(--scrollbar-padding) * 2);--vertical-scrollbar-size:var(--scrollbar-size);--horizontal-scrollbar-size:var(--scrollbar-size);--vertical-scrollbar-total-size:calc(var(--vertical-scrollbar-size) + var(--scrollbar-padding) * 2);--horizontal-scrollbar-total-size:calc(var(--horizontal-scrollbar-size) + var(--scrollbar-padding) * 2)}:host>.ng-scrollbar-wrapper[verticalDragging=true],:host>.ng-scrollbar-wrapper[verticalHovered=true]{--vertical-scrollbar-size:var(--scrollbar-hover-size);--vertical-scrollbar-total-size:calc(var(--vertical-scrollbar-size) + var(--scrollbar-padding) * 2);cursor:default}:host>.ng-scrollbar-wrapper[horizontalDragging=true],:host>.ng-scrollbar-wrapper[horizontalHovered=true]{--horizontal-scrollbar-size:var(--scrollbar-hover-size);--horizontal-scrollbar-total-size:calc(var(--horizontal-scrollbar-size) + var(--scrollbar-padding) * 2);cursor:default}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=ltr][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper{left:0;right:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{padding-right:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=rtl][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper{left:var(--scrollbar-total-size);right:0}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{padding-left:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=ltr][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=ltr][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper{left:var(--scrollbar-total-size);right:0}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{padding-left:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=rtl][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=rtl][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper{left:0;right:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{padding-right:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper{top:0;bottom:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{padding-bottom:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertAll][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertX][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper{top:var(--scrollbar-total-size);bottom:0}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertAll][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertAll][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertX][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertX][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{padding-top:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{scrollbar-width:none;-ms-overflow-style:none}:host>.ng-scrollbar-wrapper[deactivated=false]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport::-webkit-scrollbar,:host>.ng-scrollbar-wrapper[deactivated=false]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport::-webkit-scrollbar{display:none}:host>.ng-scrollbar-wrapper[deactivated=false][horizontalUsed=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-native-scrollbar-hider,:host>.ng-scrollbar-wrapper[deactivated=false][horizontalUsed=true]>.ng-scroll-viewport-wrapper>.ng-native-scrollbar-hider{bottom:var(--native-scrollbar-size)}:host>.ng-scrollbar-wrapper[deactivated=false][verticalUsed=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-native-scrollbar-hider,:host>.ng-scrollbar-wrapper[deactivated=false][verticalUsed=true]>.ng-scroll-viewport-wrapper>.ng-native-scrollbar-hider{left:0;right:var(--native-scrollbar-size)}:host>.ng-scrollbar-wrapper[deactivated=false][verticalUsed=true][dir=rtl]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-native-scrollbar-hider,:host>.ng-scrollbar-wrapper[deactivated=false][verticalUsed=true][dir=rtl]>.ng-scroll-viewport-wrapper>.ng-native-scrollbar-hider{right:0;left:var(--native-scrollbar-size)}:host>.ng-scrollbar-wrapper[deactivated=false][visibility=hover]>.scrollbar-control{opacity:0;transition-property:opacity;transition-duration:.4s;transition-delay:.8s}:host>.ng-scrollbar-wrapper[deactivated=false][visibility=hover]:active>.scrollbar-control,:host>.ng-scrollbar-wrapper[deactivated=false][visibility=hover]:focus>.scrollbar-control,:host>.ng-scrollbar-wrapper[deactivated=false][visibility=hover]:hover>.scrollbar-control{opacity:1;transition-duration:.4s;transition-delay:0ms}:host>.ng-scrollbar-wrapper[horizontalUsed=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[horizontalUsed=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{overflow-x:auto;overflow-y:hidden}:host>.ng-scrollbar-wrapper[verticalUsed=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[verticalUsed=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{overflow-y:auto;overflow-x:hidden}:host>.ng-scrollbar-wrapper[verticalUsed=true][horizontalUsed=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[verticalUsed=true][horizontalUsed=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{overflow:auto}.ng-scroll-viewport-wrapper{overflow:hidden}.ng-scroll-viewport{-webkit-overflow-scrolling:touch;contain:strict;will-change:scroll-position}::ng-deep .ng-scroll-content{position:relative!important;display:inline-block;min-width:100%}.ng-scroll-layer,.ng-scroll-viewport-wrapper,.ng-scrollbar-wrapper,::ng-deep .ng-scroll-viewport{position:absolute;left:0;right:0;top:0;bottom:0}", "::ng-deep .ng-scrollbar-wrapper[pointerEventsMethod=viewport]>.scrollbar-control{pointer-events:none}::ng-deep .ng-scrollbar-wrapper[horizontalDragging=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,::ng-deep .ng-scrollbar-wrapper[horizontalDragging=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,::ng-deep .ng-scrollbar-wrapper[scrollbarClicked=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,::ng-deep .ng-scrollbar-wrapper[scrollbarClicked=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,::ng-deep .ng-scrollbar-wrapper[verticalDragging=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,::ng-deep .ng-scrollbar-wrapper[verticalDragging=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{-webkit-user-select:none;-moz-user-select:none;user-select:none}::ng-deep .ng-scrollbar-wrapper>.scrollbar-control{position:absolute;display:flex;justify-content:center;align-items:center;transition:var(--scrollbar-track-transition)}::ng-deep .ng-scrollbar-wrapper>.scrollbar-control[scrollable=false] .ng-scrollbar-thumb{display:none}::ng-deep .ng-scrollbar-track{height:100%;width:100%;z-index:1;border-radius:var(--scrollbar-border-radius);background-color:var(--scrollbar-track-color);overflow:hidden;transition:var(--scrollbar-track-transition);cursor:default}::ng-deep .ng-scrollbar-thumb{box-sizing:border-box;position:relative;border-radius:inherit;background-color:var(--scrollbar-thumb-color);transform:translateZ(0);transition:var(--scrollbar-thumb-transition)}"]
            },] }
];
NgScrollbar.ctorParameters = () => [
    { type: ElementRef },
    { type: NgZone },
    { type: ChangeDetectorRef },
    { type: Directionality },
    { type: SmoothScrollManager },
    { type: ScrollbarManager }
];
NgScrollbar.propDecorators = {
    disabled: [{ type: Input }],
    sensorDisabled: [{ type: Input }],
    pointerEventsDisabled: [{ type: Input }],
    viewportPropagateMouseMove: [{ type: Input }],
    autoHeightDisabled: [{ type: Input }],
    autoWidthDisabled: [{ type: Input }],
    viewClass: [{ type: Input }],
    trackClass: [{ type: Input }],
    thumbClass: [{ type: Input }],
    minThumbSize: [{ type: Input }],
    trackClickScrollDuration: [{ type: Input }],
    pointerEventsMethod: [{ type: Input }],
    track: [{ type: Input }],
    visibility: [{ type: Input }],
    appearance: [{ type: Input }],
    position: [{ type: Input }],
    sensorDebounce: [{ type: Input }],
    scrollAuditTime: [{ type: Input }],
    updated: [{ type: Output }],
    scrollbarY: [{ type: ViewChild, args: ['scrollbarY', { read: ElementRef },] }],
    scrollbarX: [{ type: ViewChild, args: ['scrollbarX', { read: ElementRef },] }],
    defaultViewPort: [{ type: ViewChild, args: [ScrollViewport, { static: true },] }],
    customViewPort: [{ type: ContentChild, args: [ScrollViewport, { static: true },] }]
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmctc2Nyb2xsYmFyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vcHJvamVjdHMvbmd4LXNjcm9sbGJhci9zcmMvbGliL25nLXNjcm9sbGJhci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQ0wsU0FBUyxFQUNULEtBQUssRUFDTCxNQUFNLEVBQ04sWUFBWSxFQUNaLFNBQVMsRUFDVCxZQUFZLEVBSVosTUFBTSxFQUNOLFVBQVUsRUFDVixpQkFBaUIsRUFDakIsdUJBQXVCLEVBQ3hCLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUNuRCxPQUFPLEVBQUUscUJBQXFCLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUM5RCxPQUFPLEVBQUUsU0FBUyxFQUFjLE9BQU8sRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUN0RCxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sRUFBRSxHQUFHLEVBQUUsUUFBUSxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsR0FBRyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDekYsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ25ELE9BQU8sRUFBdUIsbUJBQW1CLEVBQXVELE1BQU0sNkJBQTZCLENBQUM7QUFXNUksT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0sMkJBQTJCLENBQUM7QUFVN0QsTUFBTSxPQUFPLFdBQVc7SUF3SnRCLFlBQ1UsRUFBYyxFQUNkLElBQVksRUFDWixpQkFBb0MsRUFDcEMsR0FBbUIsRUFDbkIsWUFBaUMsRUFDbEMsT0FBeUI7UUFMeEIsT0FBRSxHQUFGLEVBQUUsQ0FBWTtRQUNkLFNBQUksR0FBSixJQUFJLENBQVE7UUFDWixzQkFBaUIsR0FBakIsaUJBQWlCLENBQW1CO1FBQ3BDLFFBQUcsR0FBSCxHQUFHLENBQWdCO1FBQ25CLGlCQUFZLEdBQVosWUFBWSxDQUFxQjtRQUNsQyxZQUFPLEdBQVAsT0FBTyxDQUFrQjtRQTVKMUIsY0FBUyxHQUFZLEtBQUssQ0FBQztRQUMzQixvQkFBZSxHQUFZLElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLGNBQWMsQ0FBQztRQUNyRSwyQkFBc0IsR0FBWSxJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxxQkFBcUIsQ0FBQztRQUNuRix3QkFBbUIsR0FBWSxJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxrQkFBa0IsQ0FBQztRQUM3RSx1QkFBa0IsR0FBWSxJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxpQkFBaUIsQ0FBQztRQUMzRSxnQ0FBMkIsR0FBWSxJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQywwQkFBMEIsQ0FBQztRQThEckcsdURBQXVEO1FBQzlDLGNBQVMsR0FBVyxJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxTQUFTLENBQUM7UUFDbEUsdURBQXVEO1FBQzlDLGVBQVUsR0FBVyxJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxVQUFVLENBQUM7UUFDcEUsdURBQXVEO1FBQzlDLGVBQVUsR0FBVyxJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxVQUFVLENBQUM7UUFDcEUsbUNBQW1DO1FBQzFCLGlCQUFZLEdBQVcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsWUFBWSxDQUFDO1FBQ3hFLGdHQUFnRztRQUN2Riw2QkFBd0IsR0FBVyxJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyx3QkFBd0IsQ0FBQztRQUNoRzs7OztXQUlHO1FBQ00sd0JBQW1CLEdBQWlDLElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLG1CQUFtQixDQUFDO1FBQzVHOzs7Ozs7V0FNRztRQUNNLFVBQUssR0FBbUIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDO1FBQ2xFOzs7Ozs7V0FNRztRQUNNLGVBQVUsR0FBd0IsSUFBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsVUFBVSxDQUFDO1FBQ2pGOzs7OztXQUtHO1FBQ00sZUFBVSxHQUF3QixJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxVQUFVLENBQUM7UUFDakY7Ozs7Ozs7V0FPRztRQUNNLGFBQVEsR0FBc0IsSUFBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDO1FBQzNFLGlFQUFpRTtRQUN4RCxtQkFBYyxHQUFXLElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLGNBQWMsQ0FBQztRQUM1RSx3QkFBd0I7UUFDZixvQkFBZSxHQUFXLElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLGVBQWUsQ0FBQztRQUU5RSxpREFBaUQ7UUFDdkMsWUFBTyxHQUFHLElBQUksWUFBWSxFQUFRLENBQUM7UUFhN0MsdURBQXVEO1FBQ3ZELFVBQUssR0FBcUIsRUFBRSxDQUFDO1FBQzdCLG1EQUFtRDtRQUNsQyxjQUFTLEdBQUcsSUFBSSxPQUFPLEVBQVEsQ0FBQztJQW9CakQsQ0FBQztJQXRKRCxtRUFBbUU7SUFDbkUsSUFDSSxRQUFRO1FBQ1YsT0FBTyxJQUFJLENBQUMsU0FBUyxDQUFDO0lBQ3hCLENBQUM7SUFFRCxJQUFJLFFBQVEsQ0FBQyxRQUFpQjtRQUM1QixJQUFJLENBQUMsU0FBUyxHQUFHLHFCQUFxQixDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQ25ELENBQUM7SUFFRCx5Q0FBeUM7SUFDekMsSUFDSSxjQUFjO1FBQ2hCLE9BQU8sSUFBSSxDQUFDLGVBQWUsQ0FBQztJQUM5QixDQUFDO0lBRUQsSUFBSSxjQUFjLENBQUMsUUFBaUI7UUFDbEMsSUFBSSxDQUFDLGVBQWUsR0FBRyxxQkFBcUIsQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUN6RCxDQUFDO0lBRUQsc0VBQXNFO0lBQ3RFLElBQ0kscUJBQXFCO1FBQ3ZCLE9BQU8sSUFBSSxDQUFDLHNCQUFzQixDQUFDO0lBQ3JDLENBQUM7SUFFRCxJQUFJLHFCQUFxQixDQUFDLFFBQWlCO1FBQ3pDLElBQUksQ0FBQyxzQkFBc0IsR0FBRyxxQkFBcUIsQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUNoRSxDQUFDO0lBRUQsNkZBQTZGO0lBQzdGLElBQ0ksMEJBQTBCO1FBQzVCLE9BQU8sSUFBSSxDQUFDLDJCQUEyQixDQUFDO0lBQzFDLENBQUM7SUFFRCxJQUFJLDBCQUEwQixDQUFDLFFBQWlCO1FBQzlDLElBQUksQ0FBQywyQkFBMkIsR0FBRyxxQkFBcUIsQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUNyRSxDQUFDO0lBRUQsMEJBQTBCO0lBQzFCLElBQ0ksa0JBQWtCO1FBQ3BCLE9BQU8sSUFBSSxDQUFDLG1CQUFtQixDQUFDO0lBQ2xDLENBQUM7SUFFRCxJQUFJLGtCQUFrQixDQUFDLFFBQWlCO1FBQ3RDLElBQUksQ0FBQyxtQkFBbUIsR0FBRyxxQkFBcUIsQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUM3RCxDQUFDO0lBRUQseUJBQXlCO0lBQ3pCLElBQ0ksaUJBQWlCO1FBQ25CLE9BQU8sSUFBSSxDQUFDLGtCQUFrQixDQUFDO0lBQ2pDLENBQUM7SUFFRCxJQUFJLGlCQUFpQixDQUFDLFFBQWlCO1FBQ3JDLElBQUksQ0FBQyxrQkFBa0IsR0FBRyxxQkFBcUIsQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUM1RCxDQUFDO0lBaUZELElBQUksYUFBYTtRQUNmLE9BQU8sSUFBSSxDQUFDLEVBQUUsQ0FBQyxhQUFhLENBQUM7SUFDL0IsQ0FBQztJQVdEOztPQUVHO0lBQ0ssV0FBVztRQUNqQixJQUFJLFlBQVksR0FBWSxLQUFLLENBQUM7UUFDbEMsSUFBSSxjQUFjLEdBQVksS0FBSyxDQUFDO1FBQ3BDLElBQUksc0JBQXNCLEdBQVksS0FBSyxDQUFDO1FBQzVDLElBQUksd0JBQXdCLEdBQVksS0FBSyxDQUFDO1FBRTlDLGtEQUFrRDtRQUNsRCxJQUFJLElBQUksQ0FBQyxLQUFLLEtBQUssS0FBSyxJQUFJLElBQUksQ0FBQyxLQUFLLEtBQUssVUFBVSxFQUFFO1lBQ3JELHNCQUFzQixHQUFHLElBQUksQ0FBQyxRQUFTLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQyxRQUFTLENBQUMsWUFBWSxDQUFDO1lBQ25GLFlBQVksR0FBRyxJQUFJLENBQUMsVUFBVSxLQUFLLFFBQVEsSUFBSSxzQkFBc0IsQ0FBQztTQUN2RTtRQUNELG9EQUFvRDtRQUNwRCxJQUFJLElBQUksQ0FBQyxLQUFLLEtBQUssS0FBSyxJQUFJLElBQUksQ0FBQyxLQUFLLEtBQUssWUFBWSxFQUFFO1lBQ3ZELHdCQUF3QixHQUFHLElBQUksQ0FBQyxRQUFTLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQyxRQUFTLENBQUMsV0FBVyxDQUFDO1lBQ25GLGNBQWMsR0FBRyxJQUFJLENBQUMsVUFBVSxLQUFLLFFBQVEsSUFBSSx3QkFBd0IsQ0FBQztTQUMzRTtRQUVELGtDQUFrQztRQUNsQyxJQUFJLENBQUMsUUFBUSxDQUFDO1lBQ1osUUFBUSxFQUFFLElBQUksQ0FBQyxRQUFRO1lBQ3ZCLEtBQUssRUFBRSxJQUFJLENBQUMsS0FBSztZQUNqQixVQUFVLEVBQUUsSUFBSSxDQUFDLFVBQVU7WUFDM0IsVUFBVSxFQUFFLElBQUksQ0FBQyxVQUFVO1lBQzNCLFdBQVcsRUFBRSxJQUFJLENBQUMsUUFBUTtZQUMxQixHQUFHLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLO1lBQ25CLG1CQUFtQixFQUFFLElBQUksQ0FBQyxtQkFBbUI7WUFDN0MsWUFBWTtZQUNaLGNBQWM7WUFDZCxzQkFBc0I7WUFDdEIsd0JBQXdCO1NBQ3pCLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFTyxRQUFRLENBQUMsS0FBdUI7UUFDdEMsSUFBSSxDQUFDLEtBQUssbUNBQVEsSUFBSSxDQUFDLEtBQUssR0FBSyxLQUFLLENBQUUsQ0FBQztRQUN6QyxJQUFJLENBQUMsaUJBQWlCLENBQUMsYUFBYSxFQUFFLENBQUM7SUFDekMsQ0FBQztJQUVPLHNCQUFzQixDQUFDLFFBQW9DO1FBQ2pFLElBQUksS0FBVSxDQUFDO1FBQ2YsT0FBTyxJQUFJLENBQUMsUUFBUyxDQUFDLElBQUksQ0FDeEIsR0FBRyxDQUFDLENBQUMsQ0FBTSxFQUFFLEVBQUUsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLEVBQzFCLEtBQUssQ0FBQyxRQUFRLEVBQUUsUUFBUSxDQUFDLEVBQ3pCLFFBQVEsRUFBRSxFQUNWLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxJQUFJLEtBQUssSUFBSSxDQUFDLEVBQ3ZDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FDakIsQ0FBQztJQUNKLENBQUM7SUFFRDs7T0FFRztJQUNILFVBQVUsQ0FBQyxPQUF5QjtRQUNsQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsUUFBUSxtQkFBTSxPQUFPLEVBQUcsQ0FBQyxDQUFDO0lBQ3JELENBQUM7SUFFRDs7T0FFRztJQUNILFdBQVcsQ0FBQyxRQUEyQjtRQUNyQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsUUFBUSxtQkFBTSxRQUFRLEVBQUcsQ0FBQyxDQUFDO0lBQ3RELENBQUM7SUFFRDs7T0FFRztJQUNILFVBQVUsQ0FBQyxnQkFBeUI7UUFDbEMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFFLGdCQUFnQixFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQzNELENBQUM7SUFFRCxRQUFRO1FBQ04sd0NBQXdDO1FBQ3hDLElBQUksQ0FBQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsR0FBRyxFQUFFO1lBQy9CLElBQUksSUFBSSxDQUFDLGNBQWMsRUFBRTtnQkFDdkIsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDO2dCQUNwQyxJQUFJLENBQUMsZUFBZ0IsQ0FBQyxZQUFZLEVBQUUsQ0FBQzthQUN0QztpQkFBTTtnQkFDTCxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUM7YUFDdEM7WUFDRCxpQ0FBaUM7WUFDakMsSUFBSSxDQUFDLFFBQVMsQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLFNBQVUsQ0FBQyxDQUFDO1lBRTlDLElBQUksWUFBWSxHQUFHLFNBQVMsQ0FBQyxJQUFJLENBQUMsUUFBUyxDQUFDLGFBQWEsRUFBRSxRQUFRLEVBQUUsRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQztZQUN4RixvREFBb0Q7WUFDcEQsWUFBWSxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxZQUFZLENBQUM7WUFDeEcsNEJBQTRCO1lBQzVCLElBQUksQ0FBQyxRQUFRLEdBQUcsWUFBWSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7WUFDN0QsSUFBSSxDQUFDLGdCQUFnQixHQUFHLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxXQUFXLENBQUMsQ0FBQztZQUNqRSxJQUFJLENBQUMsa0JBQWtCLEdBQUcsSUFBSSxDQUFDLHNCQUFzQixDQUFDLFlBQVksQ0FBQyxDQUFDO1FBQ3RFLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUVELGtCQUFrQjtRQUNoQixJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7SUFDaEIsQ0FBQztJQUVELFdBQVc7UUFDVCxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksRUFBRSxDQUFDO1FBQ3RCLElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxFQUFFLENBQUM7SUFDNUIsQ0FBQztJQUVEOztPQUVHO0lBQ0gsTUFBTTtRQUNKLElBQUksQ0FBQyxJQUFJLENBQUMsa0JBQWtCLEVBQUU7WUFDNUIsSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDO1NBQ3JCO1FBRUQsSUFBSSxDQUFDLElBQUksQ0FBQyxpQkFBaUIsRUFBRTtZQUMzQixJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7U0FDcEI7UUFDRCxzREFBc0Q7UUFDdEQsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO1FBQ25CLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDdEIsQ0FBQztJQUVEOztPQUVHO0lBQ0gsUUFBUSxDQUFDLE9BQThCO1FBQ3JDLE9BQU8sSUFBSSxDQUFDLFlBQVksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFFBQVMsQ0FBQyxhQUFhLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDM0UsQ0FBQztJQUVEOztPQUVHO0lBQ0gsZUFBZSxDQUFDLE1BQTJCLEVBQUUsT0FBc0M7UUFDakYsT0FBTyxJQUFJLENBQUMsWUFBWSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsUUFBUyxDQUFDLGFBQWEsRUFBRSxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDMUYsQ0FBQztJQUVPLFlBQVk7UUFDbEIsc0RBQXNEO1FBQ3RELElBQUksSUFBSSxDQUFDLFVBQVUsS0FBSyxVQUFVLElBQUksSUFBSSxDQUFDLFVBQVUsRUFBRTtZQUNyRCwrQ0FBK0M7WUFDL0MsSUFBSSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsTUFBTSxHQUFHLEdBQUksSUFBSSxDQUFDLFFBQVMsQ0FBQyxhQUFhLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxhQUFhLENBQUMsWUFBYSxJQUFJLENBQUM7U0FDdEg7YUFBTTtZQUNMLElBQUksQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxHQUFJLElBQUksQ0FBQyxRQUFTLENBQUMsYUFBYyxJQUFJLENBQUM7U0FDekU7SUFDSCxDQUFDO0lBRU8sV0FBVztRQUNqQixzREFBc0Q7UUFDdEQsSUFBSSxJQUFJLENBQUMsVUFBVSxLQUFLLFVBQVUsSUFBSSxJQUFJLENBQUMsVUFBVSxFQUFFO1lBQ3JELCtDQUErQztZQUMvQyxJQUFJLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxLQUFLLEdBQUcsR0FBSSxJQUFJLENBQUMsUUFBUyxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLGFBQWEsQ0FBQyxXQUFZLElBQUksQ0FBQztTQUNuSDthQUFNO1lBQ0wsSUFBSSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLEdBQUksSUFBSSxDQUFDLFFBQVMsQ0FBQyxZQUFhLElBQUksQ0FBQztTQUN2RTtJQUNILENBQUM7OztZQWpVRixTQUFTLFNBQUM7Z0JBQ1QsUUFBUSxFQUFFLGNBQWM7Z0JBQ3hCLFFBQVEsRUFBRSxhQUFhO2dCQUN2QiwwM0JBQWdDO2dCQUVoQyxlQUFlLEVBQUUsdUJBQXVCLENBQUMsTUFBTTtnQkFDL0MsSUFBSSxFQUFFLEVBQUUsc0JBQXNCLEVBQUUsTUFBTSxFQUFFOzthQUN6Qzs7O1lBN0JDLFVBQVU7WUFEVixNQUFNO1lBRU4saUJBQWlCO1lBR1YsY0FBYztZQUtPLG1CQUFtQjtZQVd4QyxnQkFBZ0I7Ozt1QkFvQnRCLEtBQUs7NkJBVUwsS0FBSztvQ0FVTCxLQUFLO3lDQVVMLEtBQUs7aUNBVUwsS0FBSztnQ0FVTCxLQUFLO3dCQVVMLEtBQUs7eUJBRUwsS0FBSzt5QkFFTCxLQUFLOzJCQUVMLEtBQUs7dUNBRUwsS0FBSztrQ0FNTCxLQUFLO29CQVFMLEtBQUs7eUJBUUwsS0FBSzt5QkFPTCxLQUFLO3VCQVNMLEtBQUs7NkJBRUwsS0FBSzs4QkFFTCxLQUFLO3NCQUdMLE1BQU07eUJBR04sU0FBUyxTQUFDLFlBQVksRUFBRSxFQUFFLElBQUksRUFBRSxVQUFVLEVBQUU7eUJBRTVDLFNBQVMsU0FBQyxZQUFZLEVBQUUsRUFBRSxJQUFJLEVBQUUsVUFBVSxFQUFFOzhCQUc1QyxTQUFTLFNBQUMsY0FBYyxFQUFFLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRTs2QkFFMUMsWUFBWSxTQUFDLGNBQWMsRUFBRSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBDb21wb25lbnQsXG4gIElucHV0LFxuICBPdXRwdXQsXG4gIEV2ZW50RW1pdHRlcixcbiAgVmlld0NoaWxkLFxuICBDb250ZW50Q2hpbGQsXG4gIE9uSW5pdCxcbiAgQWZ0ZXJWaWV3Q2hlY2tlZCxcbiAgT25EZXN0cm95LFxuICBOZ1pvbmUsXG4gIEVsZW1lbnRSZWYsXG4gIENoYW5nZURldGVjdG9yUmVmLFxuICBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneVxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IERpcmVjdGlvbmFsaXR5IH0gZnJvbSAnQGFuZ3VsYXIvY2RrL2JpZGknO1xuaW1wb3J0IHsgY29lcmNlQm9vbGVhblByb3BlcnR5IH0gZnJvbSAnQGFuZ3VsYXIvY2RrL2NvZXJjaW9uJztcbmltcG9ydCB7IGZyb21FdmVudCwgT2JzZXJ2YWJsZSwgU3ViamVjdCB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgYXVkaXRUaW1lLCBmaWx0ZXIsIG1hcCwgcGFpcndpc2UsIHBsdWNrLCB0YWtlVW50aWwsIHRhcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCB7IFNjcm9sbFZpZXdwb3J0IH0gZnJvbSAnLi9zY3JvbGwtdmlld3BvcnQnO1xuaW1wb3J0IHsgU21vb3RoU2Nyb2xsRWxlbWVudCwgU21vb3RoU2Nyb2xsTWFuYWdlciwgU21vb3RoU2Nyb2xsVG9PcHRpb25zLCBTbW9vdGhTY3JvbGxUb0VsZW1lbnRPcHRpb25zIH0gZnJvbSAnbmd4LXNjcm9sbGJhci9zbW9vdGgtc2Nyb2xsJztcbi8vIFVuY29tbWVudCB0aGUgZm9sbG93aW5nIGxpbmUgaW4gZGV2ZWxvcG1lbnQgbW9kZVxuLy8gaW1wb3J0IHsgU21vb3RoU2Nyb2xsRWxlbWVudCwgU21vb3RoU2Nyb2xsTWFuYWdlciwgU21vb3RoU2Nyb2xsVG9PcHRpb25zIH0gZnJvbSAnLi4vLi4vc21vb3RoLXNjcm9sbC9zcmMvcHVibGljX2FwaSc7XG5pbXBvcnQge1xuICBTY3JvbGxiYXJBcHBlYXJhbmNlLFxuICBTY3JvbGxiYXJUcmFjayxcbiAgU2Nyb2xsYmFyUG9zaXRpb24sXG4gIFNjcm9sbGJhclZpc2liaWxpdHksXG4gIE5nU2Nyb2xsYmFyU3RhdGUsXG4gIFNjcm9sbGJhclBvaW50ZXJFdmVudHNNZXRob2Rcbn0gZnJvbSAnLi9uZy1zY3JvbGxiYXIubW9kZWwnO1xuaW1wb3J0IHsgU2Nyb2xsYmFyTWFuYWdlciB9IGZyb20gJy4vdXRpbHMvc2Nyb2xsYmFyLW1hbmFnZXInO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICduZy1zY3JvbGxiYXInLFxuICBleHBvcnRBczogJ25nU2Nyb2xsYmFyJyxcbiAgdGVtcGxhdGVVcmw6ICduZy1zY3JvbGxiYXIuaHRtbCcsXG4gIHN0eWxlVXJsczogWyduZy1zY3JvbGxiYXIuc2NzcycsICdzY3JvbGxiYXIvc2hhcmVkLnNjc3MnXSxcbiAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXG4gIGhvc3Q6IHsgJ1tjbGFzcy5uZy1zY3JvbGxiYXJdJzogJ3RydWUnIH1cbn0pXG5leHBvcnQgY2xhc3MgTmdTY3JvbGxiYXIgaW1wbGVtZW50cyBPbkluaXQsIEFmdGVyVmlld0NoZWNrZWQsIE9uRGVzdHJveSB7XG5cbiAgcHJpdmF0ZSBfZGlzYWJsZWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHJpdmF0ZSBfc2Vuc29yRGlzYWJsZWQ6IGJvb2xlYW4gPSB0aGlzLm1hbmFnZXIuZ2xvYmFsT3B0aW9ucy5zZW5zb3JEaXNhYmxlZDtcbiAgcHJpdmF0ZSBfcG9pbnRlckV2ZW50c0Rpc2FibGVkOiBib29sZWFuID0gdGhpcy5tYW5hZ2VyLmdsb2JhbE9wdGlvbnMucG9pbnRlckV2ZW50c0Rpc2FibGVkO1xuICBwcml2YXRlIF9hdXRvSGVpZ2h0RGlzYWJsZWQ6IGJvb2xlYW4gPSB0aGlzLm1hbmFnZXIuZ2xvYmFsT3B0aW9ucy5hdXRvSGVpZ2h0RGlzYWJsZWQ7XG4gIHByaXZhdGUgX2F1dG9XaWR0aERpc2FibGVkOiBib29sZWFuID0gdGhpcy5tYW5hZ2VyLmdsb2JhbE9wdGlvbnMuYXV0b1dpZHRoRGlzYWJsZWQ7XG4gIHByaXZhdGUgX3ZpZXdwb3J0UHJvcGFnYXRlTW91c2VNb3ZlOiBib29sZWFuID0gdGhpcy5tYW5hZ2VyLmdsb2JhbE9wdGlvbnMudmlld3BvcnRQcm9wYWdhdGVNb3VzZU1vdmU7XG5cbiAgLyoqIERpc2FibGUgY3VzdG9tIHNjcm9sbGJhciBhbmQgc3dpdGNoIGJhY2sgdG8gbmF0aXZlIHNjcm9sbGJhciAqL1xuICBASW5wdXQoKVxuICBnZXQgZGlzYWJsZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX2Rpc2FibGVkO1xuICB9XG5cbiAgc2V0IGRpc2FibGVkKGRpc2FibGVkOiBib29sZWFuKSB7XG4gICAgdGhpcy5fZGlzYWJsZWQgPSBjb2VyY2VCb29sZWFuUHJvcGVydHkoZGlzYWJsZWQpO1xuICB9XG5cbiAgLyoqIFdoZXRoZXIgUmVzaXplT2JzZXJ2ZXIgaXMgZGlzYWJsZWQgKi9cbiAgQElucHV0KClcbiAgZ2V0IHNlbnNvckRpc2FibGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9zZW5zb3JEaXNhYmxlZDtcbiAgfVxuXG4gIHNldCBzZW5zb3JEaXNhYmxlZChkaXNhYmxlZDogYm9vbGVhbikge1xuICAgIHRoaXMuX3NlbnNvckRpc2FibGVkID0gY29lcmNlQm9vbGVhblByb3BlcnR5KGRpc2FibGVkKTtcbiAgfVxuXG4gIC8qKiBBIGZsYWcgdXNlZCB0byBlbmFibGUvZGlzYWJsZSB0aGUgc2Nyb2xsYmFyIHRodW1iIGRyYWdnZWQgZXZlbnQgKi9cbiAgQElucHV0KClcbiAgZ2V0IHBvaW50ZXJFdmVudHNEaXNhYmxlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5fcG9pbnRlckV2ZW50c0Rpc2FibGVkO1xuICB9XG5cbiAgc2V0IHBvaW50ZXJFdmVudHNEaXNhYmxlZChkaXNhYmxlZDogYm9vbGVhbikge1xuICAgIHRoaXMuX3BvaW50ZXJFdmVudHNEaXNhYmxlZCA9IGNvZXJjZUJvb2xlYW5Qcm9wZXJ0eShkaXNhYmxlZCk7XG4gIH1cblxuICAvKiogRW5hYmxlIHZpZXdwb3J0IG1vdXNlbW92ZSBldmVudCBwcm9wYWdhdGlvbiAob25seSB3aGVuIHBvaW50ZXJFdmVudHNNZXRob2Q9XCJ2aWV3cG9ydFwiKSAqL1xuICBASW5wdXQoKVxuICBnZXQgdmlld3BvcnRQcm9wYWdhdGVNb3VzZU1vdmUoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX3ZpZXdwb3J0UHJvcGFnYXRlTW91c2VNb3ZlO1xuICB9XG5cbiAgc2V0IHZpZXdwb3J0UHJvcGFnYXRlTW91c2VNb3ZlKGRpc2FibGVkOiBib29sZWFuKSB7XG4gICAgdGhpcy5fdmlld3BvcnRQcm9wYWdhdGVNb3VzZU1vdmUgPSBjb2VyY2VCb29sZWFuUHJvcGVydHkoZGlzYWJsZWQpO1xuICB9XG5cbiAgLyoqIERpc2FibGUgYXV0by1oZWlnaHQgKi9cbiAgQElucHV0KClcbiAgZ2V0IGF1dG9IZWlnaHREaXNhYmxlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5fYXV0b0hlaWdodERpc2FibGVkO1xuICB9XG5cbiAgc2V0IGF1dG9IZWlnaHREaXNhYmxlZChkaXNhYmxlZDogYm9vbGVhbikge1xuICAgIHRoaXMuX2F1dG9IZWlnaHREaXNhYmxlZCA9IGNvZXJjZUJvb2xlYW5Qcm9wZXJ0eShkaXNhYmxlZCk7XG4gIH1cblxuICAvKiogRGlzYWJsZSBhdXRvLXdpZHRoICovXG4gIEBJbnB1dCgpXG4gIGdldCBhdXRvV2lkdGhEaXNhYmxlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5fYXV0b1dpZHRoRGlzYWJsZWQ7XG4gIH1cblxuICBzZXQgYXV0b1dpZHRoRGlzYWJsZWQoZGlzYWJsZWQ6IGJvb2xlYW4pIHtcbiAgICB0aGlzLl9hdXRvV2lkdGhEaXNhYmxlZCA9IGNvZXJjZUJvb2xlYW5Qcm9wZXJ0eShkaXNhYmxlZCk7XG4gIH1cblxuICAvKiogQSBjbGFzcyBmb3J3YXJkZWQgdG8gc2Nyb2xsYWJsZSB2aWV3cG9ydCBlbGVtZW50ICovXG4gIEBJbnB1dCgpIHZpZXdDbGFzczogc3RyaW5nID0gdGhpcy5tYW5hZ2VyLmdsb2JhbE9wdGlvbnMudmlld0NsYXNzO1xuICAvKiogQSBjbGFzcyBmb3J3YXJkZWQgdG8gdGhlIHNjcm9sbGJhciB0cmFjayBlbGVtZW50ICovXG4gIEBJbnB1dCgpIHRyYWNrQ2xhc3M6IHN0cmluZyA9IHRoaXMubWFuYWdlci5nbG9iYWxPcHRpb25zLnRyYWNrQ2xhc3M7XG4gIC8qKiBBIGNsYXNzIGZvcndhcmRlZCB0byB0aGUgc2Nyb2xsYmFyIHRodW1iIGVsZW1lbnQgKi9cbiAgQElucHV0KCkgdGh1bWJDbGFzczogc3RyaW5nID0gdGhpcy5tYW5hZ2VyLmdsb2JhbE9wdGlvbnMudGh1bWJDbGFzcztcbiAgLyoqIE1pbmltdW0gc2Nyb2xsYmFyIHRodW1iIHNpemUgKi9cbiAgQElucHV0KCkgbWluVGh1bWJTaXplOiBudW1iZXIgPSB0aGlzLm1hbmFnZXIuZ2xvYmFsT3B0aW9ucy5taW5UaHVtYlNpemU7XG4gIC8qKiBUaGUgZHVyYXRpb24gd2hpY2ggdGhlIHNjcm9sbGluZyB0YWtlcyB0byByZWFjaCBpdHMgdGFyZ2V0IHdoZW4gc2Nyb2xsYmFyIHJhaWwgaXMgY2xpY2tlZCAqL1xuICBASW5wdXQoKSB0cmFja0NsaWNrU2Nyb2xsRHVyYXRpb246IG51bWJlciA9IHRoaXMubWFuYWdlci5nbG9iYWxPcHRpb25zLnRyYWNrQ2xpY2tTY3JvbGxEdXJhdGlvbjtcbiAgLyoqXG4gICAqIFNldHMgdGhlIHBvaW50ZXIgZXZlbnRzIG1ldGhvZFxuICAgKiBVc2Ugdmlld3BvcnQgcG9pbnRlciBldmVudHMgIHRvIGhhbmRsZSBkcmFnZ2luZyBhbmQgdHJhY2sgY2xpY2sgKFRoaXMgbWFrZXMgc2Nyb2xsaW5nIHdvcmsgd2hlbiBtb3VzZSBpcyBvdmVyIHRoZSBzY3JvbGxiYXIpXG4gICAqIFVzZSBzY3JvbGxiYXIgcG9pbnRlciBldmVudHMgdG8gaGFuZGxlIGRyYWdnaW5nIGFuZCB0cmFjayBjbGlja1xuICAgKi9cbiAgQElucHV0KCkgcG9pbnRlckV2ZW50c01ldGhvZDogU2Nyb2xsYmFyUG9pbnRlckV2ZW50c01ldGhvZCA9IHRoaXMubWFuYWdlci5nbG9iYWxPcHRpb25zLnBvaW50ZXJFdmVudHNNZXRob2Q7XG4gIC8qKlxuICAgKiBTZXRzIHRoZSBzdXBwb3J0ZWQgc2Nyb2xsIHRyYWNrIG9mIHRoZSB2aWV3cG9ydCwgdGhlcmUgYXJlIDMgb3B0aW9uczpcbiAgICpcbiAgICogLSBgdmVydGljYWxgIFVzZSBib3RoIHZlcnRpY2FsIGFuZCBob3Jpem9udGFsIHNjcm9sbGJhclxuICAgKiAtIGBob3Jpem9udGFsYCBVc2UgYm90aCB2ZXJ0aWNhbCBhbmQgaG9yaXpvbnRhbCBzY3JvbGxiYXJcbiAgICogLSBgYWxsYCBVc2UgYm90aCB2ZXJ0aWNhbCBhbmQgaG9yaXpvbnRhbCBzY3JvbGxiYXJcbiAgICovXG4gIEBJbnB1dCgpIHRyYWNrOiBTY3JvbGxiYXJUcmFjayA9IHRoaXMubWFuYWdlci5nbG9iYWxPcHRpb25zLnRyYWNrO1xuICAvKipcbiAgICogV2hlbiB0byBzaG93IHRoZSBzY3JvbGxiYXIsIGFuZCB0aGVyZSBhcmUgMyBvcHRpb25zOlxuICAgKlxuICAgKiAtIGBuYXRpdmVgIChkZWZhdWx0KSBTY3JvbGxiYXIgd2lsbCBiZSB2aXNpYmxlIHdoZW4gdmlld3BvcnQgaXMgc2Nyb2xsYWJsZSBsaWtlIHdpdGggbmF0aXZlIHNjcm9sbGJhclxuICAgKiAtIGBob3ZlcmAgU2Nyb2xsYmFycyBhcmUgaGlkZGVuIGJ5IGRlZmF1bHQsIG9ubHkgdmlzaWJsZSBvbiBzY3JvbGxpbmcgb3IgaG92ZXJpbmdcbiAgICogLSBgYWx3YXlzYCBTY3JvbGxiYXJzIGFyZSBhbHdheXMgc2hvd24gZXZlbiBpZiB0aGUgdmlld3BvcnQgaXMgbm90IHNjcm9sbGFibGVcbiAgICovXG4gIEBJbnB1dCgpIHZpc2liaWxpdHk6IFNjcm9sbGJhclZpc2liaWxpdHkgPSB0aGlzLm1hbmFnZXIuZ2xvYmFsT3B0aW9ucy52aXNpYmlsaXR5O1xuICAvKipcbiAgICogIFNldHMgdGhlIGFwcGVhcmFuY2Ugb2YgdGhlIHNjcm9sbGJhciwgdGhlcmUgYXJlIDIgb3B0aW9uczpcbiAgICpcbiAgICogLSBgc3RhbmRhcmRgIChkZWZhdWx0KSBzY3JvbGxiYXIgc3BhY2Ugd2lsbCBiZSByZXNlcnZlZCBqdXN0IGxpa2Ugd2l0aCBuYXRpdmUgc2Nyb2xsYmFyLlxuICAgKiAtIGBjb21wYWN0YCBzY3JvbGxiYXIgZG9lc24ndCByZXNlcnZlIGFueSBzcGFjZSwgdGhleSBhcmUgcGxhY2VkIG92ZXIgdGhlIHZpZXdwb3J0LlxuICAgKi9cbiAgQElucHV0KCkgYXBwZWFyYW5jZTogU2Nyb2xsYmFyQXBwZWFyYW5jZSA9IHRoaXMubWFuYWdlci5nbG9iYWxPcHRpb25zLmFwcGVhcmFuY2U7XG4gIC8qKlxuICAgKiBTZXRzIHRoZSBwb3NpdGlvbiBvZiBlYWNoIHNjcm9sbGJhciwgdGhlcmUgYXJlIDQgb3B0aW9uczpcbiAgICpcbiAgICogLSBgbmF0aXZlYCAoRGVmYXVsdCkgVXNlIHRoZSBkZWZhdWx0IHBvc2l0aW9uIGxpa2UgaW4gbmF0aXZlIHNjcm9sbGJhci5cbiAgICogLSBgaW52ZXJ0WWAgSW52ZXJ0cyB2ZXJ0aWNhbCBzY3JvbGxiYXIgcG9zaXRpb25cbiAgICogLSBgaW52ZXJ0WGAgSW52ZXJ0cyBIb3Jpem9udGFsIHNjcm9sbGJhciBwb3NpdGlvblxuICAgKiAtIGBpbnZlcnRBbGxgIEludmVydHMgYm90aCBzY3JvbGxiYXIgcG9zaXRpb25zXG4gICAqL1xuICBASW5wdXQoKSBwb3NpdGlvbjogU2Nyb2xsYmFyUG9zaXRpb24gPSB0aGlzLm1hbmFnZXIuZ2xvYmFsT3B0aW9ucy5wb3NpdGlvbjtcbiAgLyoqIERlYm91bmNlIGludGVydmFsIGZvciBkZXRlY3RpbmcgY2hhbmdlcyB2aWEgUmVzaXplT2JzZXJ2ZXIgKi9cbiAgQElucHV0KCkgc2Vuc29yRGVib3VuY2U6IG51bWJlciA9IHRoaXMubWFuYWdlci5nbG9iYWxPcHRpb25zLnNlbnNvckRlYm91bmNlO1xuICAvKiogU2Nyb2xsIEF1ZGl0IFRpbWUgKi9cbiAgQElucHV0KCkgc2Nyb2xsQXVkaXRUaW1lOiBudW1iZXIgPSB0aGlzLm1hbmFnZXIuZ2xvYmFsT3B0aW9ucy5zY3JvbGxBdWRpdFRpbWU7XG5cbiAgLyoqIFN0ZWFtIHRoYXQgZW1pdHMgd2hlbiBzY3JvbGxiYXIgaXMgdXBkYXRlZCAqL1xuICBAT3V0cHV0KCkgdXBkYXRlZCA9IG5ldyBFdmVudEVtaXR0ZXI8dm9pZD4oKTtcblxuICAvKiogVmVydGljYWwgc2Nyb2xsYmFyIEVsZW1lbnRSZWYgdXNlZCBmb3IgaW5jbHVkZSBpdHMgdGhpY2tuZXNzIGluIGF1dG8td2lkdGggbW9kZSAqL1xuICBAVmlld0NoaWxkKCdzY3JvbGxiYXJZJywgeyByZWFkOiBFbGVtZW50UmVmIH0pIHByaXZhdGUgc2Nyb2xsYmFyWSE6IEVsZW1lbnRSZWY7XG4gIC8qKiBIb3Jpem9udGFsIHNjcm9sbGJhciBFbGVtZW50UmVmIHVzZWQgZm9yIGluY2x1ZGUgaXRzIHRoaWNrbmVzcyBpbiBhdXRvLWhlaWdodCBtb2RlICovXG4gIEBWaWV3Q2hpbGQoJ3Njcm9sbGJhclgnLCB7IHJlYWQ6IEVsZW1lbnRSZWYgfSkgcHJpdmF0ZSBzY3JvbGxiYXJYITogRWxlbWVudFJlZjtcblxuICAvKiogRGVmYXVsdCB2aWV3cG9ydCByZWZlcmVuY2UgKi9cbiAgQFZpZXdDaGlsZChTY3JvbGxWaWV3cG9ydCwgeyBzdGF0aWM6IHRydWUgfSkgcHJpdmF0ZSBkZWZhdWx0Vmlld1BvcnQhOiBTY3JvbGxWaWV3cG9ydDtcbiAgLyoqIEN1c3RvbSB2aWV3cG9ydCByZWZlcmVuY2UgKi9cbiAgQENvbnRlbnRDaGlsZChTY3JvbGxWaWV3cG9ydCwgeyBzdGF0aWM6IHRydWUgfSkgcHJpdmF0ZSBjdXN0b21WaWV3UG9ydCE6IFNjcm9sbFZpZXdwb3J0O1xuICAvKiogVmlld3BvcnQgRWxlbWVudCAqL1xuICB2aWV3cG9ydCE6IFNjcm9sbFZpZXdwb3J0O1xuICAvKiogU2V0IG9mIGF0dHJpYnV0ZXMgYWRkZWQgb24gdGhlIHNjcm9sbGJhciB3cmFwcGVyICovXG4gIHN0YXRlOiBOZ1Njcm9sbGJhclN0YXRlID0ge307XG4gIC8qKiBTdHJlYW0gdGhhdCBkZXN0cm95cyBjb21wb25lbnRzJyBvYnNlcnZhYmxlcyAqL1xuICBwcml2YXRlIHJlYWRvbmx5IGRlc3Ryb3llZCA9IG5ldyBTdWJqZWN0PHZvaWQ+KCk7XG5cbiAgLyoqIFN0cmVhbSB0aGF0IGVtaXRzIG9uIHNjcm9sbCBldmVudCAqL1xuICBzY3JvbGxlZCE6IE9ic2VydmFibGU8YW55PjtcbiAgLyoqIFN0ZWFtIHRoYXQgZW1pdHMgc2Nyb2xsIGV2ZW50IGZvciB2ZXJ0aWNhbCBzY3JvbGxiYXIgKi9cbiAgdmVydGljYWxTY3JvbGxlZCE6IE9ic2VydmFibGU8YW55PjtcbiAgLyoqIFN0ZWFtIHRoYXQgZW1pdHMgc2Nyb2xsIGV2ZW50IGZvciBob3Jpem9udGFsIHNjcm9sbGJhciAqL1xuICBob3Jpem9udGFsU2Nyb2xsZWQhOiBPYnNlcnZhYmxlPGFueT47XG5cbiAgZ2V0IG5hdGl2ZUVsZW1lbnQoKTogSFRNTEVsZW1lbnQge1xuICAgIHJldHVybiB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQ7XG4gIH1cblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIGVsOiBFbGVtZW50UmVmLFxuICAgIHByaXZhdGUgem9uZTogTmdab25lLFxuICAgIHByaXZhdGUgY2hhbmdlRGV0ZWN0b3JSZWY6IENoYW5nZURldGVjdG9yUmVmLFxuICAgIHByaXZhdGUgZGlyOiBEaXJlY3Rpb25hbGl0eSxcbiAgICBwcml2YXRlIHNtb290aFNjcm9sbDogU21vb3RoU2Nyb2xsTWFuYWdlcixcbiAgICBwdWJsaWMgbWFuYWdlcjogU2Nyb2xsYmFyTWFuYWdlcikge1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBsb2NhbCBzdGF0ZSB3aXRoIGVhY2ggY2hhbmdlIGRldGVjdGlvblxuICAgKi9cbiAgcHJpdmF0ZSB1cGRhdGVTdGF0ZSgpIHtcbiAgICBsZXQgdmVydGljYWxVc2VkOiBib29sZWFuID0gZmFsc2U7XG4gICAgbGV0IGhvcml6b250YWxVc2VkOiBib29sZWFuID0gZmFsc2U7XG4gICAgbGV0IGlzVmVydGljYWxseVNjcm9sbGFibGU6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICBsZXQgaXNIb3Jpem9udGFsbHlTY3JvbGxhYmxlOiBib29sZWFuID0gZmFsc2U7XG5cbiAgICAvLyBDaGVjayBpZiB2ZXJ0aWNhbCBzY3JvbGxiYXIgc2hvdWxkIGJlIGRpc3BsYXllZFxuICAgIGlmICh0aGlzLnRyYWNrID09PSAnYWxsJyB8fCB0aGlzLnRyYWNrID09PSAndmVydGljYWwnKSB7XG4gICAgICBpc1ZlcnRpY2FsbHlTY3JvbGxhYmxlID0gdGhpcy52aWV3cG9ydCEuc2Nyb2xsSGVpZ2h0ID4gdGhpcy52aWV3cG9ydCEuY2xpZW50SGVpZ2h0O1xuICAgICAgdmVydGljYWxVc2VkID0gdGhpcy52aXNpYmlsaXR5ID09PSAnYWx3YXlzJyB8fCBpc1ZlcnRpY2FsbHlTY3JvbGxhYmxlO1xuICAgIH1cbiAgICAvLyBDaGVjayBpZiBob3Jpem9udGFsIHNjcm9sbGJhciBzaG91bGQgYmUgZGlzcGxheWVkXG4gICAgaWYgKHRoaXMudHJhY2sgPT09ICdhbGwnIHx8IHRoaXMudHJhY2sgPT09ICdob3Jpem9udGFsJykge1xuICAgICAgaXNIb3Jpem9udGFsbHlTY3JvbGxhYmxlID0gdGhpcy52aWV3cG9ydCEuc2Nyb2xsV2lkdGggPiB0aGlzLnZpZXdwb3J0IS5jbGllbnRXaWR0aDtcbiAgICAgIGhvcml6b250YWxVc2VkID0gdGhpcy52aXNpYmlsaXR5ID09PSAnYWx3YXlzJyB8fCBpc0hvcml6b250YWxseVNjcm9sbGFibGU7XG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIGlubmVyIHdyYXBwZXIgYXR0cmlidXRlc1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgcG9zaXRpb246IHRoaXMucG9zaXRpb24sXG4gICAgICB0cmFjazogdGhpcy50cmFjayxcbiAgICAgIGFwcGVhcmFuY2U6IHRoaXMuYXBwZWFyYW5jZSxcbiAgICAgIHZpc2liaWxpdHk6IHRoaXMudmlzaWJpbGl0eSxcbiAgICAgIGRlYWN0aXZhdGVkOiB0aGlzLmRpc2FibGVkLFxuICAgICAgZGlyOiB0aGlzLmRpci52YWx1ZSxcbiAgICAgIHBvaW50ZXJFdmVudHNNZXRob2Q6IHRoaXMucG9pbnRlckV2ZW50c01ldGhvZCxcbiAgICAgIHZlcnRpY2FsVXNlZCxcbiAgICAgIGhvcml6b250YWxVc2VkLFxuICAgICAgaXNWZXJ0aWNhbGx5U2Nyb2xsYWJsZSxcbiAgICAgIGlzSG9yaXpvbnRhbGx5U2Nyb2xsYWJsZVxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBzZXRTdGF0ZShzdGF0ZTogTmdTY3JvbGxiYXJTdGF0ZSkge1xuICAgIHRoaXMuc3RhdGUgPSB7IC4uLnRoaXMuc3RhdGUsIC4uLnN0YXRlIH07XG4gICAgdGhpcy5jaGFuZ2VEZXRlY3RvclJlZi5kZXRlY3RDaGFuZ2VzKCk7XG4gIH1cblxuICBwcml2YXRlIGdldFNjcm9sbGVkQnlEaXJlY3Rpb24ocHJvcGVydHk6ICdzY3JvbGxMZWZ0JyB8ICdzY3JvbGxUb3AnKSB7XG4gICAgbGV0IGV2ZW50OiBhbnk7XG4gICAgcmV0dXJuIHRoaXMuc2Nyb2xsZWQhLnBpcGUoXG4gICAgICB0YXAoKGU6IGFueSkgPT4gZXZlbnQgPSBlKSxcbiAgICAgIHBsdWNrKCd0YXJnZXQnLCBwcm9wZXJ0eSksXG4gICAgICBwYWlyd2lzZSgpLFxuICAgICAgZmlsdGVyKChbcHJldiwgY3Vycl0pID0+IHByZXYgIT09IGN1cnIpLFxuICAgICAgbWFwKCgpID0+IGV2ZW50KVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IGhvdmVyZWQgc3RhdGUgaWYgYSBzY3JvbGxiYXIgaXMgYmVpbmcgaG92ZXJlZFxuICAgKi9cbiAgc2V0SG92ZXJlZChob3ZlcmVkOiBTY3JvbGxiYXJIb3ZlcmVkKSB7XG4gICAgdGhpcy56b25lLnJ1bigoKSA9PiB0aGlzLnNldFN0YXRlKHsgLi4uaG92ZXJlZCB9KSk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IGRyYWdnaW5nIHN0YXRlIGlmIGEgc2Nyb2xsYmFyIGlzIGJlaW5nIGRyYWdnZWRcbiAgICovXG4gIHNldERyYWdnaW5nKGRyYWdnaW5nOiBTY3JvbGxiYXJEcmFnZ2luZykge1xuICAgIHRoaXMuem9uZS5ydW4oKCkgPT4gdGhpcy5zZXRTdGF0ZSh7IC4uLmRyYWdnaW5nIH0pKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgY2xpY2tlZCBzdGF0ZSBpZiBhIHNjcm9sbGJhciB0cmFjayBpcyBiZWluZyBjbGlja1xuICAgKi9cbiAgc2V0Q2xpY2tlZChzY3JvbGxiYXJDbGlja2VkOiBib29sZWFuKSB7XG4gICAgdGhpcy56b25lLnJ1bigoKSA9PiB0aGlzLnNldFN0YXRlKHsgc2Nyb2xsYmFyQ2xpY2tlZCB9KSk7XG4gIH1cblxuICBuZ09uSW5pdCgpIHtcbiAgICAvLyBTZXQgdGhlIHZpZXdwb3J0IGJhc2VkIG9uIHVzZXIgY2hvaWNlXG4gICAgdGhpcy56b25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgIGlmICh0aGlzLmN1c3RvbVZpZXdQb3J0KSB7XG4gICAgICAgIHRoaXMudmlld3BvcnQgPSB0aGlzLmN1c3RvbVZpZXdQb3J0O1xuICAgICAgICB0aGlzLmRlZmF1bHRWaWV3UG9ydCEuc2V0QXNXcmFwcGVyKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnZpZXdwb3J0ID0gdGhpcy5kZWZhdWx0Vmlld1BvcnQ7XG4gICAgICB9XG4gICAgICAvLyBBY3RpdmF0ZSB0aGUgc2VsZWN0ZWQgdmlld3BvcnRcbiAgICAgIHRoaXMudmlld3BvcnQhLnNldEFzVmlld3BvcnQodGhpcy52aWV3Q2xhc3MhKTtcblxuICAgICAgbGV0IHNjcm9sbFN0cmVhbSA9IGZyb21FdmVudCh0aGlzLnZpZXdwb3J0IS5uYXRpdmVFbGVtZW50LCAnc2Nyb2xsJywgeyBwYXNzaXZlOiB0cnVlIH0pO1xuICAgICAgLy8gVGhyb3R0bGUgc2Nyb2xsIGV2ZW50IGlmICdzY3JvbGxBdWRpdFRpbWUnIGlzIHNldFxuICAgICAgc2Nyb2xsU3RyZWFtID0gdGhpcy5zY3JvbGxBdWRpdFRpbWUgPyBzY3JvbGxTdHJlYW0ucGlwZShhdWRpdFRpbWUodGhpcy5zY3JvbGxBdWRpdFRpbWUpKSA6IHNjcm9sbFN0cmVhbTtcbiAgICAgIC8vIEluaXRpYWxpemUgc2Nyb2xsIHN0cmVhbXNcbiAgICAgIHRoaXMuc2Nyb2xsZWQgPSBzY3JvbGxTdHJlYW0ucGlwZSh0YWtlVW50aWwodGhpcy5kZXN0cm95ZWQpKTtcbiAgICAgIHRoaXMudmVydGljYWxTY3JvbGxlZCA9IHRoaXMuZ2V0U2Nyb2xsZWRCeURpcmVjdGlvbignc2Nyb2xsVG9wJyk7XG4gICAgICB0aGlzLmhvcml6b250YWxTY3JvbGxlZCA9IHRoaXMuZ2V0U2Nyb2xsZWRCeURpcmVjdGlvbignc2Nyb2xsTGVmdCcpO1xuICAgIH0pO1xuICB9XG5cbiAgbmdBZnRlclZpZXdDaGVja2VkKCkge1xuICAgIHRoaXMudXBkYXRlKCk7XG4gIH1cblxuICBuZ09uRGVzdHJveSgpIHtcbiAgICB0aGlzLmRlc3Ryb3llZC5uZXh0KCk7XG4gICAgdGhpcy5kZXN0cm95ZWQuY29tcGxldGUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgbG9jYWwgc3RhdGUgYW5kIHRoZSBpbnRlcm5hbCBzY3JvbGxiYXIgY29udHJvbHNcbiAgICovXG4gIHVwZGF0ZSgpIHtcbiAgICBpZiAoIXRoaXMuYXV0b0hlaWdodERpc2FibGVkKSB7XG4gICAgICB0aGlzLnVwZGF0ZUhlaWdodCgpO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5hdXRvV2lkdGhEaXNhYmxlZCkge1xuICAgICAgdGhpcy51cGRhdGVXaWR0aCgpO1xuICAgIH1cbiAgICAvLyBSZS1ldmFsdWF0ZSB0aGUgc3RhdGUgYWZ0ZXIgc2V0dGluZyBoZWlnaHQgb3Igd2lkdGhcbiAgICB0aGlzLnVwZGF0ZVN0YXRlKCk7XG4gICAgdGhpcy51cGRhdGVkLm5leHQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTbW9vdGggc2Nyb2xsIGZ1bmN0aW9uc1xuICAgKi9cbiAgc2Nyb2xsVG8ob3B0aW9uczogU21vb3RoU2Nyb2xsVG9PcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgcmV0dXJuIHRoaXMuc21vb3RoU2Nyb2xsLnNjcm9sbFRvKHRoaXMudmlld3BvcnQhLm5hdGl2ZUVsZW1lbnQsIG9wdGlvbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNjcm9sbCB0byBlbGVtZW50IGJ5IHJlZmVyZW5jZSBvciBzZWxlY3RvclxuICAgKi9cbiAgc2Nyb2xsVG9FbGVtZW50KHRhcmdldDogU21vb3RoU2Nyb2xsRWxlbWVudCwgb3B0aW9ucz86IFNtb290aFNjcm9sbFRvRWxlbWVudE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gdGhpcy5zbW9vdGhTY3JvbGwuc2Nyb2xsVG9FbGVtZW50KHRoaXMudmlld3BvcnQhLm5hdGl2ZUVsZW1lbnQsIHRhcmdldCwgb3B0aW9ucyk7XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZUhlaWdodCgpIHtcbiAgICAvLyBBdXRvLWhlaWdodDogU2V0IGNvbXBvbmVudCBoZWlnaHQgdG8gY29udGVudCBoZWlnaHRcbiAgICBpZiAodGhpcy5hcHBlYXJhbmNlID09PSAnc3RhbmRhcmQnICYmIHRoaXMuc2Nyb2xsYmFyWCkge1xuICAgICAgLy8gaWYgc2Nyb2xsYmFyLXggaXMgZGlzcGxheWVkIGluIHN0YW5kYXJkIG1vZGVcbiAgICAgIHRoaXMubmF0aXZlRWxlbWVudC5zdHlsZS5oZWlnaHQgPSBgJHsgdGhpcy52aWV3cG9ydCEuY29udGVudEhlaWdodCArIHRoaXMuc2Nyb2xsYmFyWC5uYXRpdmVFbGVtZW50LmNsaWVudEhlaWdodCB9cHhgO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm5hdGl2ZUVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gYCR7IHRoaXMudmlld3BvcnQhLmNvbnRlbnRIZWlnaHQgfXB4YDtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVdpZHRoKCkge1xuICAgIC8vIEF1dG8td2lkdGg6IFNldCBjb21wb25lbnQgbWluV2lkdGggdG8gY29udGVudCB3aWR0aFxuICAgIGlmICh0aGlzLmFwcGVhcmFuY2UgPT09ICdzdGFuZGFyZCcgJiYgdGhpcy5zY3JvbGxiYXJZKSB7XG4gICAgICAvLyBpZiBzY3JvbGxiYXIteSBpcyBkaXNwbGF5ZWQgaW4gc3RhbmRhcmQgbW9kZVxuICAgICAgdGhpcy5uYXRpdmVFbGVtZW50LnN0eWxlLndpZHRoID0gYCR7IHRoaXMudmlld3BvcnQhLmNvbnRlbnRXaWR0aCArIHRoaXMuc2Nyb2xsYmFyWS5uYXRpdmVFbGVtZW50LmNsaWVudFdpZHRoIH1weGA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubmF0aXZlRWxlbWVudC5zdHlsZS53aWR0aCA9IGAkeyB0aGlzLnZpZXdwb3J0IS5jb250ZW50V2lkdGggfXB4YDtcbiAgICB9XG4gIH1cbn1cblxuaW50ZXJmYWNlIFNjcm9sbGJhckRyYWdnaW5nIHtcbiAgdmVydGljYWxEcmFnZ2luZz86IGJvb2xlYW47XG4gIGhvcml6b250YWxEcmFnZ2luZz86IGJvb2xlYW47XG59XG5cbmludGVyZmFjZSBTY3JvbGxiYXJIb3ZlcmVkIHtcbiAgdmVydGljYWxIb3ZlcmVkPzogYm9vbGVhbjtcbiAgaG9yaXpvbnRhbEhvdmVyZWQ/OiBib29sZWFuO1xufVxuIl19